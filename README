SEMPLICE NUCLEO DI SISTEMA OPERATIVO
====================================

Realizzazione del nucleo multiprogrammato descritto nel testo
'Calcolatori elettronici vol. IV', di G. Frosini e B. Lazzerini.

COMPILAZIONE
============

Ambiente Linux:

$ ./configure
$ make

Ambiente DOS/Windows 9x e me:

> compila

La compilazione produce una immagine di floppy disk avviabile in
build/fd0.img.

Con Windows 2000 e XP:

> cd xp
> passo1.bat
> passo2.bat
> passo3.bat

NOTA: passo2.bat viene generato dinamicamente

ESECUZIONE
==========

E' possibile copiare l' immagine su dischetto ed avviarlo.

Ambiente Linux:

$ make floppy

(In questo l' immagine viene copiata su /dev/fd0)

Ambiente DOS/Windows:

Utilizzare il programma rawrite.

E' possibile eseguire il sistema da emulatore. Il file di
configurazione per Bochs e' fornito per DOS/Windows e creato
durante la compilazione sotto Linux. Per avviarlo:

Ambiente Linux:

$ cd bochs ; bochs ; cd ..

(Assicurarsi di avere Bochs installato correttamente)

NOTA - Configurazione di Bochs: il percorso delle immagini delle rom
usate dipende dall' installazione, nel file generato si assume
che siano presenti nella directory /usr/local/share/bochs/, in
alcuni sistemi potrebbero essere in posizione diversa. In questo caso
basta cambiare le righe relative a romimage e vgaromimage.

Ambiente DOS/Windows:

Cliccare due volte sull' icona di bochsrc.bxrc nella directory
bochs.

SCRITTURA DI PROGRAMMI UTENTE
=============================

Scrivere i corpi dei programmi utente come descritto nel testo
sopra citato, fornendo il file sorgente .in nella directory utente/prog
per ogni corpo ed aggiungendo il suo nome al file
utente/prog/sorgenti.lst; inserire il contenuto delle sezioni condivise
nei file utente/shared/sh_usr.cpp (livello utente) e
utente/shared/sh_sys.cpp (livello sistema).

Procedere alla compilazione del sistema.

USARE LA PORTA SERIALE CON BOCHS
================================

Per usare la seriale nell' ambiente emulato da Bochs e` necessario
chiamare la funzione kickse_out() in startse_out(), nel file
io/io.cpp (e ricompilare il sistema). Usando il sistema cosi` ottenuto
sul PC vero si perde uno dei primi due byte trasferiti.

CONTENUTO DELLE DIRECTORY
=========================

bochs/		configurazione dell' emulatore Bochs
boot/		sorgenti del bootloader
build/		risultati parziali e finale della compilazione
io/		sorgenti del modulo di IO
lds/		script del linker
sistema/	sorgenti del sistema
utente/		sorgenti dei programmi utente
util/		sorgenti dei programmi di utilita' usati per la compilazione

