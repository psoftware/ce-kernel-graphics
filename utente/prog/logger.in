#include <sys.h>
#include <lib.h>

process __logger body __logger_reader(1), 20000, LIV_UTENTE;


log_msg __logger_buf;
bool __logger_quit = false;
natl __logger_quanti;

process_body __logger_reader(int a)
{

	resident(&__logger_buf, sizeof(__logger_buf));
	resident(&__logger_quanti, sizeof(__logger_quanti));

	while (!__logger_quit) {
		readlog(__logger_buf);
		__logger_quanti = LOG_MSG_SIZE;
		writese_0(0, (natb*)__logger_buf.msg, __logger_quanti);
		__logger_quanti = 2;
		writese_0(0, (natb*)"\r\n", __logger_quanti);
	}
}

