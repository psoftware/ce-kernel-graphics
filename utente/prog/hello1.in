#include <sys.h>
#include <lib.h>
#include <newdelete.h>
#include <windows/u_obj.h>
#include <winobj.h>

process hello1 body hello_body1(0), 22, LIV_UTENTE;

long int wait1=139999999;

u_window * uwind;
u_label * label1;
u_textbox * textbox1;

void button1_click_down_handler(des_user_event event)
{
	copy(textbox1->text, label1->text);
	uwind->update_object(label1);
}

process_body hello_body1(int a)
{
	uwind = new u_window(128,160,20,80);
	uwind->show();

	label1 = new u_label();
	label1->size_x=120;
	label1->size_y=120;
	label1->pos_x=4;
	label1->pos_y=4;
	label1->z_index=0;
	label1->back_color=0xcbf442;
	label1->text_color=0x000000;
	copy("", label1->text);

	uwind->add_object(label1);
	uwind->update_object(label1);

	u_button * button1 = new u_button();
	button1->size_x=50;
	button1->size_y=20;
	button1->pos_x=(128 - button1->size_x)/2;
	button1->pos_y=20;
	button1->z_index=0;
	button1->back_color=0xffe74c3c;
	button1->clicked_color=0xffe67e22;
	button1->border_color=0xffc0392b;
	button1->text_color=0xffffffff;
	button1->handler_mouse_down = button1_click_down_handler;
	copy("Stampa", button1->text);

	uwind->add_object(button1);
	uwind->update_object(button1);

	textbox1 = new u_textbox();
	textbox1->size_x=80;
	textbox1->size_y=60;
	textbox1->pos_x=20;
	textbox1->pos_y=50;
	textbox1->z_index=0;
	textbox1->back_color=0xffffffff;
	textbox1->text_color=0xff000000;
	textbox1->border_color=0xff000000;
	copy("AAA", textbox1->text);
	uwind->add_object(textbox1);
	uwind->update_object(textbox1);

	u_textbox * textbox2 = new u_textbox();
	textbox2->size_x=80;
	textbox2->size_y=20;
	textbox2->pos_x=20;
	textbox2->pos_y=120;
	textbox2->z_index=0;
	textbox2->back_color=0xffffffff;
	textbox2->text_color=0xff000000;
	textbox2->border_color=0xff000000;
	copy("", textbox2->text);

	uwind->add_object(textbox2);
	uwind->update_object(textbox2);

	copy("Inizio processo 1!", label1->text);
	uwind->update_object(label1);

	while(--wait1);
	copy("Inizio processo 1!\nBLABLABLA    BLABLABLA", label1->text);
	uwind->update_object(label1);

	button1->pos_x+=10;
	button1->pos_y+=5;
	uwind->update_object(button1);

	//event receive cycle
	while(true)
		uwind->process_event();
}